{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'http://localhost:8080/api';\n      this.isAuthenticatedSubject = new BehaviorSubject(false);\n      this.userRole = '';\n    }\n    login(username, password) {\n      return this.http.post(`${this.apiUrl}/auth/login`, {\n        login: username,\n        password\n      });\n    }\n    register(user) {\n      return this.http.post(`${this.apiUrl}/auth/register`, user);\n    }\n    setAuthenticated(value) {\n      this.isAuthenticatedSubject.next(value);\n    }\n    setUserRole(role) {\n      this.userRole = role;\n      localStorage.setItem('userRole', role);\n    }\n    getRole() {\n      return this.userRole || localStorage.getItem('userRole') || '';\n    }\n    isAdmin() {\n      return this.getRole() === 'ADMIN';\n    }\n    isAuthenticated() {\n      return this.isAuthenticatedSubject.asObservable();\n    }\n    validatePassword(password) {\n      const errors = [];\n      if (password.length < 8) errors.push('Senha deve ter pelo menos 8 caracteres');\n      if (!/[A-Z]/.test(password)) errors.push('Senha deve conter pelo menos uma letra maiúscula');\n      if (!/[a-z]/.test(password)) errors.push('Senha deve conter pelo menos uma letra minúscula');\n      if (!/[0-9]/.test(password)) errors.push('Senha deve conter pelo menos um número');\n      if (!/[!@#$%^&*]/.test(password)) errors.push('Senha deve conter pelo menos um caractere especial');\n      return errors;\n    }\n    static {\n      this.ɵfac = function AuthService_Factory(t) {\n        return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: AuthService,\n        factory: AuthService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return AuthService;\n})();","map":{"version":3,"names":["BehaviorSubject","AuthService","constructor","http","apiUrl","isAuthenticatedSubject","userRole","login","username","password","post","register","user","setAuthenticated","value","next","setUserRole","role","localStorage","setItem","getRole","getItem","isAdmin","isAuthenticated","asObservable","validatePassword","errors","length","push","test","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\1781432312005\\Documents\\git.repo\\Onplay_Reborn_frontend\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n  private apiUrl = 'http://localhost:8080/api';\r\n  private isAuthenticatedSubject = new BehaviorSubject<boolean>(false);\r\n  private userRole = '';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  login(username: string, password: string): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/auth/login`, { login: username, password });\r\n  }\r\n\r\n  register(user: any): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/auth/register`, user);\r\n  }\r\n\r\n  setAuthenticated(value: boolean) {\r\n    this.isAuthenticatedSubject.next(value);\r\n  }\r\n\r\n  setUserRole(role: string) {\r\n    this.userRole = role;\r\n    localStorage.setItem('userRole', role);\r\n  }\r\n\r\n  getRole(): string {\r\n    return this.userRole || localStorage.getItem('userRole') || '';\r\n  }\r\n\r\n  isAdmin(): boolean {\r\n    return this.getRole() === 'ADMIN';\r\n  }\r\n\r\n  isAuthenticated(): Observable<boolean> {\r\n    return this.isAuthenticatedSubject.asObservable();\r\n  }\r\n\r\n  validatePassword(password: string): string[] {\r\n    const errors = [];\r\n    if (password.length < 8) errors.push('Senha deve ter pelo menos 8 caracteres');\r\n    if (!/[A-Z]/.test(password)) errors.push('Senha deve conter pelo menos uma letra maiúscula');\r\n    if (!/[a-z]/.test(password)) errors.push('Senha deve conter pelo menos uma letra minúscula');\r\n    if (!/[0-9]/.test(password)) errors.push('Senha deve conter pelo menos um número');\r\n    if (!/[!@#$%^&*]/.test(password)) errors.push('Senha deve conter pelo menos um caractere especial');\r\n    return errors;\r\n  }\r\n}"],"mappings":"AAEA,SAAqBA,eAAe,QAAQ,MAAM;;;AAKlD,WAAaC,WAAW;EAAlB,MAAOA,WAAW;IAKtBC,YAAoBC,IAAgB;MAAhB,KAAAA,IAAI,GAAJA,IAAI;MAJhB,KAAAC,MAAM,GAAG,2BAA2B;MACpC,KAAAC,sBAAsB,GAAG,IAAIL,eAAe,CAAU,KAAK,CAAC;MAC5D,KAAAM,QAAQ,GAAG,EAAE;IAEkB;IAEvCC,KAAKA,CAACC,QAAgB,EAAEC,QAAgB;MACtC,OAAO,IAAI,CAACN,IAAI,CAACO,IAAI,CAAC,GAAG,IAAI,CAACN,MAAM,aAAa,EAAE;QAAEG,KAAK,EAAEC,QAAQ;QAAEC;MAAQ,CAAE,CAAC;IACnF;IAEAE,QAAQA,CAACC,IAAS;MAChB,OAAO,IAAI,CAACT,IAAI,CAACO,IAAI,CAAC,GAAG,IAAI,CAACN,MAAM,gBAAgB,EAAEQ,IAAI,CAAC;IAC7D;IAEAC,gBAAgBA,CAACC,KAAc;MAC7B,IAAI,CAACT,sBAAsB,CAACU,IAAI,CAACD,KAAK,CAAC;IACzC;IAEAE,WAAWA,CAACC,IAAY;MACtB,IAAI,CAACX,QAAQ,GAAGW,IAAI;MACpBC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAAC;IACxC;IAEAG,OAAOA,CAAA;MACL,OAAO,IAAI,CAACd,QAAQ,IAAIY,YAAY,CAACG,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE;IAChE;IAEAC,OAAOA,CAAA;MACL,OAAO,IAAI,CAACF,OAAO,EAAE,KAAK,OAAO;IACnC;IAEAG,eAAeA,CAAA;MACb,OAAO,IAAI,CAAClB,sBAAsB,CAACmB,YAAY,EAAE;IACnD;IAEAC,gBAAgBA,CAAChB,QAAgB;MAC/B,MAAMiB,MAAM,GAAG,EAAE;MACjB,IAAIjB,QAAQ,CAACkB,MAAM,GAAG,CAAC,EAAED,MAAM,CAACE,IAAI,CAAC,wCAAwC,CAAC;MAC9E,IAAI,CAAC,OAAO,CAACC,IAAI,CAACpB,QAAQ,CAAC,EAAEiB,MAAM,CAACE,IAAI,CAAC,kDAAkD,CAAC;MAC5F,IAAI,CAAC,OAAO,CAACC,IAAI,CAACpB,QAAQ,CAAC,EAAEiB,MAAM,CAACE,IAAI,CAAC,kDAAkD,CAAC;MAC5F,IAAI,CAAC,OAAO,CAACC,IAAI,CAACpB,QAAQ,CAAC,EAAEiB,MAAM,CAACE,IAAI,CAAC,wCAAwC,CAAC;MAClF,IAAI,CAAC,YAAY,CAACC,IAAI,CAACpB,QAAQ,CAAC,EAAEiB,MAAM,CAACE,IAAI,CAAC,oDAAoD,CAAC;MACnG,OAAOF,MAAM;IACf;;;yBA5CWzB,WAAW,EAAA6B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;MAAA;IAAA;;;eAAXhC,WAAW;QAAAiC,OAAA,EAAXjC,WAAW,CAAAkC,IAAA;QAAAC,UAAA,EAFV;MAAM;IAAA;;SAEPnC,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}