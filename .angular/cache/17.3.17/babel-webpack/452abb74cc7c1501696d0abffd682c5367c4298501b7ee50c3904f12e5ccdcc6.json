{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet LoginComponent = class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.isLogin = true;\n    this.username = '';\n    this.email = '';\n    this.password = '';\n    this.confirmPassword = '';\n    this.passwordErrors = [];\n    this.errorMessage = '';\n  }\n  // AQUI ESTÁ A CORREÇÃO NA LÓGICA\n  toggleMode(event) {\n    event.preventDefault(); // Impede o recarregamento da página\n    this.isLogin = !this.isLogin;\n    this.clearForm();\n  }\n  onSubmit() {\n    this.errorMessage = '';\n    if (this.isLogin) {\n      this.login();\n    } else {\n      this.register();\n    }\n  }\n  login() {\n    this.authService.login(this.username, this.password).subscribe({\n      next: response => {\n        this.authService.setAuthenticated(true);\n        if (response.role) {\n          this.authService.setUserRole(response.role);\n        }\n        this.router.navigate(['/catalog']);\n      },\n      error: err => {\n        this.errorMessage = err.error?.message || 'Usuário ou senha inválidos';\n      }\n    });\n  }\n  register() {\n    this.passwordErrors = this.authService.validatePassword(this.password);\n    if (this.passwordErrors.length > 0) return;\n    if (this.password !== this.confirmPassword) {\n      this.errorMessage = 'As senhas não coincidem';\n      return;\n    }\n    const newUser = {\n      username: this.username,\n      email: this.email,\n      password: this.password\n    };\n    this.authService.register(newUser).subscribe({\n      next: response => {\n        alert('Conta criada com sucesso! Faça login.');\n        this.isLogin = true;\n        this.clearForm();\n      },\n      error: err => {\n        this.errorMessage = err.error?.message || 'Erro ao criar usuário. Tente outro email/user.';\n      }\n    });\n  }\n  isFormValid() {\n    if (this.isLogin) {\n      return !!(this.username && this.password);\n    }\n    if (!this.password) {\n      return false;\n    }\n    const passwordValid = this.authService.validatePassword(this.password).length === 0;\n    return !!(this.username && this.email && this.password && this.confirmPassword && passwordValid);\n  }\n  onPasswordChange() {\n    if (!this.isLogin && this.password) {\n      this.passwordErrors = this.authService.validatePassword(this.password);\n    }\n  }\n  clearForm() {\n    this.username = '';\n    this.email = '';\n    this.password = '';\n    this.confirmPassword = '';\n    this.passwordErrors = [];\n    this.errorMessage = '';\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"min-h-screen bg-black flex items-center justify-center px-4\">\n      <div class=\"w-full max-w-md bg-black bg-opacity-75 rounded-lg p-8 border border-gray-800\">\n        <h2 class=\"text-3xl font-bold text-white text-center mb-8\">{{ isLogin ? 'Entrar' : 'Criar Conta' }}</h2>\n        \n        <form (ngSubmit)=\"onSubmit()\" class=\"space-y-4\">\n          <div>\n            <input type=\"text\" [(ngModel)]=\"username\" name=\"username\" \n                   [placeholder]=\"isLogin ? 'Email ou usuário' : 'Nome de usuário'\" \n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\n          </div>\n          \n          <div *ngIf=\"!isLogin\">\n            <input type=\"email\" [(ngModel)]=\"email\" name=\"email\" placeholder=\"Email\" \n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\n          </div>\n          \n          <div>\n            <input type=\"password\" [(ngModel)]=\"password\" name=\"password\" placeholder=\"Senha\" \n                   (ngModelChange)=\"onPasswordChange()\"\n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\n          </div>\n          \n          <div *ngIf=\"!isLogin\">\n            <input type=\"password\" [(ngModel)]=\"confirmPassword\" name=\"confirmPassword\" placeholder=\"Confirmar senha\" \n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\n          </div>\n          \n          <div *ngIf=\"!isLogin\" class=\"text-xs text-gray-400 space-y-1\">\n            <p class=\"font-medium\">Requisitos da senha:</p>\n            <ul class=\"list-disc list-inside space-y-0.5\">\n              <li>Mínimo 8 caracteres</li>\n              <li>1 letra maiúscula</li>\n              <li>1 letra minúscula</li>\n              <li>1 número</li>\n              <li>1 caractere especial (!@#$%^&*)</li>\n            </ul>\n          </div>\n          \n          <div *ngIf=\"passwordErrors.length > 0\" class=\"bg-red-900 bg-opacity-50 border border-red-600 rounded-md p-3\">\n            <div *ngFor=\"let error of passwordErrors\" class=\"text-red-300 text-sm\">{{ error }}</div>\n          </div>\n          \n          <div *ngIf=\"errorMessage\" class=\"text-red-400 text-center text-sm\">{{ errorMessage }}</div>\n          \n          <button type=\"submit\" [disabled]=\"!isFormValid()\" \n                  class=\"w-full py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white font-semibold rounded-md transition-colors\">\n            {{ isLogin ? 'Entrar' : 'Criar Conta' }}\n          </button>\n        </form>\n        \n        <p class=\"text-gray-400 text-center mt-6\">\n          {{ isLogin ? 'Novo por aqui?' : 'Já tem uma conta?' }}\n          <a href=\"#\" (click)=\"toggleMode($event)\" class=\"text-white hover:underline ml-1\">\n            {{ isLogin ? 'Assine agora' : 'Entre agora' }}\n          </a>\n        </p>\n      </div>\n    </div>\n  `,\n  styles: []\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["Component","CommonModule","FormsModule","LoginComponent","constructor","authService","router","isLogin","username","email","password","confirmPassword","passwordErrors","errorMessage","toggleMode","event","preventDefault","clearForm","onSubmit","login","register","subscribe","next","response","setAuthenticated","role","setUserRole","navigate","error","err","message","validatePassword","length","newUser","alert","isFormValid","passwordValid","onPasswordChange","__decorate","selector","standalone","imports","template","styles"],"sources":["C:\\Users\\1781432312005\\Documents\\git.repo\\Onplay_Reborn_Frontend\\src\\app\\components\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  template: `\r\n    <div class=\"min-h-screen bg-black flex items-center justify-center px-4\">\r\n      <div class=\"w-full max-w-md bg-black bg-opacity-75 rounded-lg p-8 border border-gray-800\">\r\n        <h2 class=\"text-3xl font-bold text-white text-center mb-8\">{{ isLogin ? 'Entrar' : 'Criar Conta' }}</h2>\r\n        \r\n        <form (ngSubmit)=\"onSubmit()\" class=\"space-y-4\">\r\n          <div>\r\n            <input type=\"text\" [(ngModel)]=\"username\" name=\"username\" \r\n                   [placeholder]=\"isLogin ? 'Email ou usuário' : 'Nome de usuário'\" \r\n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"!isLogin\">\r\n            <input type=\"email\" [(ngModel)]=\"email\" name=\"email\" placeholder=\"Email\" \r\n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\r\n          </div>\r\n          \r\n          <div>\r\n            <input type=\"password\" [(ngModel)]=\"password\" name=\"password\" placeholder=\"Senha\" \r\n                   (ngModelChange)=\"onPasswordChange()\"\r\n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"!isLogin\">\r\n            <input type=\"password\" [(ngModel)]=\"confirmPassword\" name=\"confirmPassword\" placeholder=\"Confirmar senha\" \r\n                   class=\"w-full px-4 py-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:border-red-500 focus:outline-none\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"!isLogin\" class=\"text-xs text-gray-400 space-y-1\">\r\n            <p class=\"font-medium\">Requisitos da senha:</p>\r\n            <ul class=\"list-disc list-inside space-y-0.5\">\r\n              <li>Mínimo 8 caracteres</li>\r\n              <li>1 letra maiúscula</li>\r\n              <li>1 letra minúscula</li>\r\n              <li>1 número</li>\r\n              <li>1 caractere especial (!@#$%^&*)</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div *ngIf=\"passwordErrors.length > 0\" class=\"bg-red-900 bg-opacity-50 border border-red-600 rounded-md p-3\">\r\n            <div *ngFor=\"let error of passwordErrors\" class=\"text-red-300 text-sm\">{{ error }}</div>\r\n          </div>\r\n          \r\n          <div *ngIf=\"errorMessage\" class=\"text-red-400 text-center text-sm\">{{ errorMessage }}</div>\r\n          \r\n          <button type=\"submit\" [disabled]=\"!isFormValid()\" \r\n                  class=\"w-full py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white font-semibold rounded-md transition-colors\">\r\n            {{ isLogin ? 'Entrar' : 'Criar Conta' }}\r\n          </button>\r\n        </form>\r\n        \r\n        <p class=\"text-gray-400 text-center mt-6\">\r\n          {{ isLogin ? 'Novo por aqui?' : 'Já tem uma conta?' }}\r\n          <a href=\"#\" (click)=\"toggleMode($event)\" class=\"text-white hover:underline ml-1\">\r\n            {{ isLogin ? 'Assine agora' : 'Entre agora' }}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  `,\r\n  styles: []\r\n})\r\nexport class LoginComponent {\r\n  isLogin = true;\r\n  username = '';\r\n  email = ''; \r\n  password = '';\r\n  confirmPassword = '';\r\n  passwordErrors: string[] = [];\r\n  errorMessage = '';\r\n\r\n  constructor(private authService: AuthService, private router: Router) {}\r\n\r\n  // AQUI ESTÁ A CORREÇÃO NA LÓGICA\r\n  toggleMode(event: Event) {\r\n    event.preventDefault(); // Impede o recarregamento da página\r\n    this.isLogin = !this.isLogin;\r\n    this.clearForm();\r\n  }\r\n\r\n  onSubmit() {\r\n    this.errorMessage = '';\r\n    if (this.isLogin) {\r\n      this.login();\r\n    } else {\r\n      this.register();\r\n    }\r\n  }\r\n\r\n  login() {\r\n    this.authService.login(this.username, this.password).subscribe({\r\n      next: (response) => {\r\n        this.authService.setAuthenticated(true);\r\n        if (response.role) {\r\n          this.authService.setUserRole(response.role);\r\n        }\r\n        this.router.navigate(['/catalog']);\r\n      },\r\n      error: (err) => {\r\n        this.errorMessage = err.error?.message || 'Usuário ou senha inválidos';\r\n      }\r\n    });\r\n  }\r\n\r\n  register() {\r\n    this.passwordErrors = this.authService.validatePassword(this.password);\r\n    \r\n    if (this.passwordErrors.length > 0) return;\r\n    \r\n    if (this.password !== this.confirmPassword) {\r\n      this.errorMessage = 'As senhas não coincidem';\r\n      return;\r\n    }\r\n\r\n    const newUser = {\r\n      username: this.username,\r\n      email: this.email,\r\n      password: this.password\r\n    };\r\n\r\n    this.authService.register(newUser).subscribe({\r\n      next: (response) => {\r\n        alert('Conta criada com sucesso! Faça login.');\r\n        this.isLogin = true;\r\n        this.clearForm();\r\n      },\r\n      error: (err) => {\r\n        this.errorMessage = err.error?.message || 'Erro ao criar usuário. Tente outro email/user.';\r\n      }\r\n    });\r\n  }\r\n\r\n  isFormValid(): boolean {\r\n    if (this.isLogin) {\r\n      return !!(this.username && this.password);\r\n    }\r\n    \r\n    if (!this.password) {\r\n      return false;\r\n    }\r\n    \r\n    const passwordValid = this.authService.validatePassword(this.password).length === 0;\r\n    return !!(this.username && this.email && this.password && this.confirmPassword && passwordValid);\r\n  }\r\n\r\n  onPasswordChange() {\r\n    if (!this.isLogin && this.password) {\r\n      this.passwordErrors = this.authService.validatePassword(this.password);\r\n    }\r\n  }\r\n\r\n  clearForm() {\r\n    this.username = '';\r\n    this.email = '';\r\n    this.password = '';\r\n    this.confirmPassword = '';\r\n    this.passwordErrors = [];\r\n    this.errorMessage = '';\r\n  }\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;AAsErC,IAAMC,cAAc,GAApB,MAAMA,cAAc;EASzBC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,KAAAD,WAAW,GAAXA,WAAW;IAAuB,KAAAC,MAAM,GAANA,MAAM;IAR5D,KAAAC,OAAO,GAAG,IAAI;IACd,KAAAC,QAAQ,GAAG,EAAE;IACb,KAAAC,KAAK,GAAG,EAAE;IACV,KAAAC,QAAQ,GAAG,EAAE;IACb,KAAAC,eAAe,GAAG,EAAE;IACpB,KAAAC,cAAc,GAAa,EAAE;IAC7B,KAAAC,YAAY,GAAG,EAAE;EAEsD;EAEvE;EACAC,UAAUA,CAACC,KAAY;IACrBA,KAAK,CAACC,cAAc,EAAE,CAAC,CAAC;IACxB,IAAI,CAACT,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO;IAC5B,IAAI,CAACU,SAAS,EAAE;EAClB;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACL,YAAY,GAAG,EAAE;IACtB,IAAI,IAAI,CAACN,OAAO,EAAE;MAChB,IAAI,CAACY,KAAK,EAAE;KACb,MAAM;MACL,IAAI,CAACC,QAAQ,EAAE;;EAEnB;EAEAD,KAAKA,CAAA;IACH,IAAI,CAACd,WAAW,CAACc,KAAK,CAAC,IAAI,CAACX,QAAQ,EAAE,IAAI,CAACE,QAAQ,CAAC,CAACW,SAAS,CAAC;MAC7DC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAI,CAAClB,WAAW,CAACmB,gBAAgB,CAAC,IAAI,CAAC;QACvC,IAAID,QAAQ,CAACE,IAAI,EAAE;UACjB,IAAI,CAACpB,WAAW,CAACqB,WAAW,CAACH,QAAQ,CAACE,IAAI,CAAC;;QAE7C,IAAI,CAACnB,MAAM,CAACqB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;MACpC,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAI;QACb,IAAI,CAAChB,YAAY,GAAGgB,GAAG,CAACD,KAAK,EAAEE,OAAO,IAAI,4BAA4B;MACxE;KACD,CAAC;EACJ;EAEAV,QAAQA,CAAA;IACN,IAAI,CAACR,cAAc,GAAG,IAAI,CAACP,WAAW,CAAC0B,gBAAgB,CAAC,IAAI,CAACrB,QAAQ,CAAC;IAEtE,IAAI,IAAI,CAACE,cAAc,CAACoB,MAAM,GAAG,CAAC,EAAE;IAEpC,IAAI,IAAI,CAACtB,QAAQ,KAAK,IAAI,CAACC,eAAe,EAAE;MAC1C,IAAI,CAACE,YAAY,GAAG,yBAAyB;MAC7C;;IAGF,MAAMoB,OAAO,GAAG;MACdzB,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvBC,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,QAAQ,EAAE,IAAI,CAACA;KAChB;IAED,IAAI,CAACL,WAAW,CAACe,QAAQ,CAACa,OAAO,CAAC,CAACZ,SAAS,CAAC;MAC3CC,IAAI,EAAGC,QAAQ,IAAI;QACjBW,KAAK,CAAC,uCAAuC,CAAC;QAC9C,IAAI,CAAC3B,OAAO,GAAG,IAAI;QACnB,IAAI,CAACU,SAAS,EAAE;MAClB,CAAC;MACDW,KAAK,EAAGC,GAAG,IAAI;QACb,IAAI,CAAChB,YAAY,GAAGgB,GAAG,CAACD,KAAK,EAAEE,OAAO,IAAI,gDAAgD;MAC5F;KACD,CAAC;EACJ;EAEAK,WAAWA,CAAA;IACT,IAAI,IAAI,CAAC5B,OAAO,EAAE;MAChB,OAAO,CAAC,EAAE,IAAI,CAACC,QAAQ,IAAI,IAAI,CAACE,QAAQ,CAAC;;IAG3C,IAAI,CAAC,IAAI,CAACA,QAAQ,EAAE;MAClB,OAAO,KAAK;;IAGd,MAAM0B,aAAa,GAAG,IAAI,CAAC/B,WAAW,CAAC0B,gBAAgB,CAAC,IAAI,CAACrB,QAAQ,CAAC,CAACsB,MAAM,KAAK,CAAC;IACnF,OAAO,CAAC,EAAE,IAAI,CAACxB,QAAQ,IAAI,IAAI,CAACC,KAAK,IAAI,IAAI,CAACC,QAAQ,IAAI,IAAI,CAACC,eAAe,IAAIyB,aAAa,CAAC;EAClG;EAEAC,gBAAgBA,CAAA;IACd,IAAI,CAAC,IAAI,CAAC9B,OAAO,IAAI,IAAI,CAACG,QAAQ,EAAE;MAClC,IAAI,CAACE,cAAc,GAAG,IAAI,CAACP,WAAW,CAAC0B,gBAAgB,CAAC,IAAI,CAACrB,QAAQ,CAAC;;EAE1E;EAEAO,SAASA,CAAA;IACP,IAAI,CAACT,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,eAAe,GAAG,EAAE;IACzB,IAAI,CAACC,cAAc,GAAG,EAAE;IACxB,IAAI,CAACC,YAAY,GAAG,EAAE;EACxB;CACD;AAjGYV,cAAc,GAAAmC,UAAA,EAlE1BtC,SAAS,CAAC;EACTuC,QAAQ,EAAE,WAAW;EACrBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACxC,YAAY,EAAEC,WAAW,CAAC;EACpCwC,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2DT;EACDC,MAAM,EAAE;CACT,CAAC,C,EACWxC,cAAc,CAiG1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}