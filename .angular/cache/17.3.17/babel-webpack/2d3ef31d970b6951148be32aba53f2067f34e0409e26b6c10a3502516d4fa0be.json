{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"input\", 11);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_div_7_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.email, $event) || (ctx_r1.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.email);\n  }\n}\nfunction LoginComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"input\", 12);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_div_10_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.confirmPassword, $event) || (ctx_r1.confirmPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.confirmPassword);\n  }\n}\nfunction LoginComponent_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const error_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(error_r4);\n  }\n}\nfunction LoginComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LoginComponent_div_11_div_1_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.passwordErrors);\n  }\n}\nfunction LoginComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, router) {\n      this.authService = authService;\n      this.router = router;\n      this.isLogin = true;\n      this.username = '';\n      this.email = '';\n      this.password = '';\n      this.confirmPassword = '';\n      this.passwordErrors = [];\n      this.errorMessage = '';\n    }\n    // AQUI ESTÁ A CORREÇÃO NA LÓGICA\n    toggleMode(event) {\n      event.preventDefault(); // Impede o recarregamento da página\n      this.isLogin = !this.isLogin;\n      this.clearForm();\n    }\n    onSubmit() {\n      this.errorMessage = '';\n      if (this.isLogin) {\n        this.login();\n      } else {\n        this.register();\n      }\n    }\n    login() {\n      this.authService.login(this.username, this.password).subscribe({\n        next: response => {\n          this.authService.setAuthenticated(true);\n          this.router.navigate(['/catalog']);\n        },\n        error: err => {\n          this.errorMessage = err.error?.message || 'Usuário ou senha inválidos';\n        }\n      });\n    }\n    register() {\n      this.passwordErrors = this.authService.validatePassword(this.password);\n      if (this.passwordErrors.length > 0) return;\n      if (this.password !== this.confirmPassword) {\n        this.errorMessage = 'As senhas não coincidem';\n        return;\n      }\n      const newUser = {\n        username: this.username,\n        email: this.email,\n        password: this.password\n      };\n      this.authService.register(newUser).subscribe({\n        next: response => {\n          alert('Conta criada com sucesso! Faça login.');\n          this.isLogin = true;\n          this.clearForm();\n        },\n        error: err => {\n          this.errorMessage = err.error?.message || 'Erro ao criar usuário. Tente outro email/user.';\n        }\n      });\n    }\n    isFormValid() {\n      if (this.isLogin) {\n        return !!(this.username && this.password);\n      }\n      return !!(this.username && this.email && this.password && this.confirmPassword && this.passwordErrors.length === 0);\n    }\n    clearForm() {\n      this.username = '';\n      this.email = '';\n      this.password = '';\n      this.confirmPassword = '';\n      this.passwordErrors = [];\n      this.errorMessage = '';\n    }\n    static {\n      this.ɵfac = function LoginComponent_Factory(t) {\n        return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LoginComponent,\n        selectors: [[\"app-login\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 19,\n        vars: 12,\n        consts: [[1, \"container\"], [1, \"form-container\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"placeholder\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Senha\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"error-messages\", 4, \"ngIf\"], [\"class\", \"error center-error\", 4, \"ngIf\"], [\"type\", \"submit\", 3, \"disabled\"], [\"href\", \"#\", 3, \"click\"], [\"type\", \"email\", \"name\", \"email\", \"placeholder\", \"Email\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"name\", \"confirmPassword\", \"placeholder\", \"Confirmar Senha\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [1, \"error-messages\"], [\"class\", \"error\", 4, \"ngFor\", \"ngForOf\"], [1, \"error\"], [1, \"error\", \"center-error\"]],\n        template: function LoginComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.username, $event) || (ctx.username = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 2, 1, \"div\", 5);\n            i0.ɵɵelementStart(8, \"div\", 3)(9, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(10, LoginComponent_div_10_Template, 2, 1, \"div\", 5)(11, LoginComponent_div_11_Template, 2, 1, \"div\", 7)(12, LoginComponent_div_12_Template, 2, 1, \"div\", 8);\n            i0.ɵɵelementStart(13, \"button\", 9);\n            i0.ɵɵtext(14);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"p\");\n            i0.ɵɵtext(16);\n            i0.ɵɵelementStart(17, \"a\", 10);\n            i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_17_listener($event) {\n              return ctx.toggleMode($event);\n            });\n            i0.ɵɵtext(18);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.isLogin ? \"Login\" : \"Cadastro\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.username);\n            i0.ɵɵproperty(\"placeholder\", ctx.isLogin ? \"Usu\\u00E1rio ou Email\" : \"Nome de Usu\\u00E1rio\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLogin);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLogin);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.passwordErrors.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", !ctx.isFormValid());\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.isLogin ? \"Entrar\" : \"Cadastrar\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLogin ? \"N\\u00E3o tem conta?\" : \"J\\u00E1 tem conta?\", \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.isLogin ? \"Cadastre-se\" : \"Fa\\u00E7a login\");\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n        styles: [\".container[_ngcontent-%COMP%] { display: flex; justify-content: center; align-items: center; height: 100vh; background: #f5f5f5; }\\n    .form-container[_ngcontent-%COMP%] { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 350px; }\\n    h2[_ngcontent-%COMP%] { text-align: center; margin-bottom: 1.5rem; color: #333; }\\n    .form-group[_ngcontent-%COMP%] { margin-bottom: 1rem; }\\n    input[_ngcontent-%COMP%] { width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\\n    button[_ngcontent-%COMP%] { width: 100%; padding: 0.75rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 1rem; }\\n    button[_ngcontent-%COMP%]:disabled { background: #ccc; cursor: not-allowed; }\\n    .error-messages[_ngcontent-%COMP%] { margin: 1rem 0; background: #fff0f0; padding: 0.5rem; border-radius: 4px; border: 1px solid #ffcccc; }\\n    .error[_ngcontent-%COMP%] { color: #dc3545; font-size: 0.8rem; margin-bottom: 0.25rem; }\\n    .center-error[_ngcontent-%COMP%] { text-align: center; margin-top: 1rem; }\\n    p[_ngcontent-%COMP%] { text-align: center; margin-top: 1.5rem; }\\n    a[_ngcontent-%COMP%] { color: #007bff; text-decoration: none; }\\n    a[_ngcontent-%COMP%]:hover { text-decoration: underline; }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtJQUNJLGFBQWEsYUFBYSxFQUFFLHVCQUF1QixFQUFFLG1CQUFtQixFQUFFLGFBQWEsRUFBRSxtQkFBbUIsRUFBRTtJQUM5RyxrQkFBa0IsaUJBQWlCLEVBQUUsYUFBYSxFQUFFLGtCQUFrQixFQUFFLHNDQUFzQyxFQUFFLFlBQVksRUFBRTtJQUM5SCxLQUFLLGtCQUFrQixFQUFFLHFCQUFxQixFQUFFLFdBQVcsRUFBRTtJQUM3RCxjQUFjLG1CQUFtQixFQUFFO0lBQ25DLFFBQVEsV0FBVyxFQUFFLGdCQUFnQixFQUFFLHNCQUFzQixFQUFFLGtCQUFrQixFQUFFLHNCQUFzQixFQUFFO0lBQzNHLFNBQVMsV0FBVyxFQUFFLGdCQUFnQixFQUFFLG1CQUFtQixFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUUsZUFBZSxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFO0lBQ25LLGtCQUFrQixnQkFBZ0IsRUFBRSxtQkFBbUIsRUFBRTtJQUN6RCxrQkFBa0IsY0FBYyxFQUFFLG1CQUFtQixFQUFFLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSx5QkFBeUIsRUFBRTtJQUN2SCxTQUFTLGNBQWMsRUFBRSxpQkFBaUIsRUFBRSxzQkFBc0IsRUFBRTtJQUNwRSxnQkFBZ0Isa0JBQWtCLEVBQUUsZ0JBQWdCLEVBQUU7SUFDdEQsSUFBSSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRTtJQUM1QyxJQUFJLGNBQWMsRUFBRSxxQkFBcUIsRUFBRTtJQUMzQyxVQUFVLDBCQUEwQixFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgLmNvbnRhaW5lciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBoZWlnaHQ6IDEwMHZoOyBiYWNrZ3JvdW5kOiAjZjVmNWY1OyB9XG4gICAgLmZvcm0tY29udGFpbmVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDJyZW07IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMSk7IHdpZHRoOiAzNTBweDsgfVxuICAgIGgyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxLjVyZW07IGNvbG9yOiAjMzMzOyB9XG4gICAgLmZvcm0tZ3JvdXAgeyBtYXJnaW4tYm90dG9tOiAxcmVtOyB9XG4gICAgaW5wdXQgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMC43NXJlbTsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9XG4gICAgYnV0dG9uIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDAuNzVyZW07IGJhY2tncm91bmQ6ICMwMDdiZmY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi10b3A6IDFyZW07IH1cbiAgICBidXR0b246ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiAjY2NjOyBjdXJzb3I6IG5vdC1hbGxvd2VkOyB9XG4gICAgLmVycm9yLW1lc3NhZ2VzIHsgbWFyZ2luOiAxcmVtIDA7IGJhY2tncm91bmQ6ICNmZmYwZjA7IHBhZGRpbmc6IDAuNXJlbTsgYm9yZGVyLXJhZGl1czogNHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZmZjY2NjOyB9XG4gICAgLmVycm9yIHsgY29sb3I6ICNkYzM1NDU7IGZvbnQtc2l6ZTogMC44cmVtOyBtYXJnaW4tYm90dG9tOiAwLjI1cmVtOyB9XG4gICAgLmNlbnRlci1lcnJvciB7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMXJlbTsgfVxuICAgIHAgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDEuNXJlbTsgfVxuICAgIGEgeyBjb2xvcjogIzAwN2JmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB9XG4gICAgYTpob3ZlciB7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9XG4gICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n      });\n    }\n  }\n  return LoginComponent;\n})();","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵtwoWayListener","LoginComponent_div_7_Template_input_ngModelChange_1_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","email","ɵɵresetView","ɵɵelementEnd","ɵɵadvance","ɵɵtwoWayProperty","LoginComponent_div_10_Template_input_ngModelChange_1_listener","_r3","confirmPassword","ɵɵtext","ɵɵtextInterpolate","error_r4","ɵɵtemplate","LoginComponent_div_11_div_1_Template","ɵɵproperty","passwordErrors","errorMessage","LoginComponent","constructor","authService","router","isLogin","username","password","toggleMode","event","preventDefault","clearForm","onSubmit","login","register","subscribe","next","response","setAuthenticated","navigate","error","err","message","validatePassword","length","newUser","alert","isFormValid","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_4_listener","LoginComponent_Template_input_ngModelChange_6_listener","LoginComponent_div_7_Template","LoginComponent_Template_input_ngModelChange_9_listener","LoginComponent_div_10_Template","LoginComponent_div_11_Template","LoginComponent_div_12_Template","LoginComponent_Template_a_click_17_listener","ɵɵtextInterpolate1","i3","NgForOf","NgIf","i4","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","NgForm","styles"],"sources":["C:\\Users\\1781432312005\\Documents\\git.repo\\Onplay_Reborn_frontend\\src\\app\\components\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  template: `\r\n    <div class=\"container\">\r\n      <div class=\"form-container\">\r\n        <h2>{{ isLogin ? 'Login' : 'Cadastro' }}</h2>\r\n        \r\n        <form (ngSubmit)=\"onSubmit()\">\r\n          <div class=\"form-group\">\r\n            <input type=\"text\" [(ngModel)]=\"username\" name=\"username\" \r\n                   [placeholder]=\"isLogin ? 'Usuário ou Email' : 'Nome de Usuário'\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"!isLogin\" class=\"form-group\">\r\n            <input type=\"email\" [(ngModel)]=\"email\" name=\"email\" placeholder=\"Email\" required>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <input type=\"password\" [(ngModel)]=\"password\" name=\"password\" placeholder=\"Senha\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"!isLogin\" class=\"form-group\">\r\n            <input type=\"password\" [(ngModel)]=\"confirmPassword\" name=\"confirmPassword\" placeholder=\"Confirmar Senha\" required>\r\n          </div>\r\n          \r\n          <div *ngIf=\"passwordErrors.length > 0\" class=\"error-messages\">\r\n            <div *ngFor=\"let error of passwordErrors\" class=\"error\">{{ error }}</div>\r\n          </div>\r\n          \r\n          <div *ngIf=\"errorMessage\" class=\"error center-error\">{{ errorMessage }}</div>\r\n          \r\n          <button type=\"submit\" [disabled]=\"!isFormValid()\">{{ isLogin ? 'Entrar' : 'Cadastrar' }}</button>\r\n        </form>\r\n        \r\n        <p>\r\n          {{ isLogin ? 'Não tem conta?' : 'Já tem conta?' }}\r\n          <a href=\"#\" (click)=\"toggleMode($event)\">{{ isLogin ? 'Cadastre-se' : 'Faça login' }}</a>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    .container { display: flex; justify-content: center; align-items: center; height: 100vh; background: #f5f5f5; }\r\n    .form-container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 350px; }\r\n    h2 { text-align: center; margin-bottom: 1.5rem; color: #333; }\r\n    .form-group { margin-bottom: 1rem; }\r\n    input { width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }\r\n    button { width: 100%; padding: 0.75rem; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; margin-top: 1rem; }\r\n    button:disabled { background: #ccc; cursor: not-allowed; }\r\n    .error-messages { margin: 1rem 0; background: #fff0f0; padding: 0.5rem; border-radius: 4px; border: 1px solid #ffcccc; }\r\n    .error { color: #dc3545; font-size: 0.8rem; margin-bottom: 0.25rem; }\r\n    .center-error { text-align: center; margin-top: 1rem; }\r\n    p { text-align: center; margin-top: 1.5rem; }\r\n    a { color: #007bff; text-decoration: none; }\r\n    a:hover { text-decoration: underline; }\r\n  `]\r\n})\r\nexport class LoginComponent {\r\n  isLogin = true;\r\n  username = '';\r\n  email = ''; \r\n  password = '';\r\n  confirmPassword = '';\r\n  passwordErrors: string[] = [];\r\n  errorMessage = '';\r\n\r\n  constructor(private authService: AuthService, private router: Router) {}\r\n\r\n  // AQUI ESTÁ A CORREÇÃO NA LÓGICA\r\n  toggleMode(event: Event) {\r\n    event.preventDefault(); // Impede o recarregamento da página\r\n    this.isLogin = !this.isLogin;\r\n    this.clearForm();\r\n  }\r\n\r\n  onSubmit() {\r\n    this.errorMessage = '';\r\n    if (this.isLogin) {\r\n      this.login();\r\n    } else {\r\n      this.register();\r\n    }\r\n  }\r\n\r\n  login() {\r\n    this.authService.login(this.username, this.password).subscribe({\r\n      next: (response) => {\r\n        this.authService.setAuthenticated(true);\r\n        this.router.navigate(['/catalog']);\r\n      },\r\n      error: (err) => {\r\n        this.errorMessage = err.error?.message || 'Usuário ou senha inválidos';\r\n      }\r\n    });\r\n  }\r\n\r\n  register() {\r\n    this.passwordErrors = this.authService.validatePassword(this.password);\r\n    \r\n    if (this.passwordErrors.length > 0) return;\r\n    \r\n    if (this.password !== this.confirmPassword) {\r\n      this.errorMessage = 'As senhas não coincidem';\r\n      return;\r\n    }\r\n\r\n    const newUser = {\r\n      username: this.username,\r\n      email: this.email,\r\n      password: this.password\r\n    };\r\n\r\n    this.authService.register(newUser).subscribe({\r\n      next: (response) => {\r\n        alert('Conta criada com sucesso! Faça login.');\r\n        this.isLogin = true;\r\n        this.clearForm();\r\n      },\r\n      error: (err) => {\r\n        this.errorMessage = err.error?.message || 'Erro ao criar usuário. Tente outro email/user.';\r\n      }\r\n    });\r\n  }\r\n\r\n  isFormValid(): boolean {\r\n    if (this.isLogin) {\r\n      return !!(this.username && this.password);\r\n    }\r\n    return !!(this.username && this.email && this.password && this.confirmPassword && this.passwordErrors.length === 0);\r\n  }\r\n\r\n  clearForm() {\r\n    this.username = '';\r\n    this.email = '';\r\n    this.password = '';\r\n    this.confirmPassword = '';\r\n    this.passwordErrors = [];\r\n    this.errorMessage = '';\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}